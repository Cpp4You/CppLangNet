---
sidebar_position:	3
sidebar_label:		"3. Napisy"
title:				"Napisy"
description:		"Lekcja: podstawy napisÃ³w w jÄ™zyku C++"
tags:				[string, napis, tekst, typ, zmienna, deklaracja, definicja, inicjalizacja]
hide_title:			true
---

<!-- Presets -->
import NotFinished		from '@site/i18n/pl/presets/NotFinished.mdx';
import ImproveSection	from '@site/i18n/pl/presets/ImproveSection.mdx';

<!-- Components -->
import Tabs				from '@theme/Tabs';
import TabItem			from '@theme/TabItem';
import Columns			from "@site-comps/Columns";

<NotFinished/>

# Napisy

W tej lekcji nauczysz siÄ™ korzystaÄ‡ ze zmiennych, ktÃ³re przechowujÄ… tekst.

## Motywacja

Zmienne typu tekstowego sÄ… bardzo przydatne. PrzykÅ‚adem niech bÄ™dzie program, ktÃ³ry
wczytuje imie uÅ¼ytkownika, po czym wita go podajÄ…c iloÅ›Ä‡ znakÃ³w w jego imieniu.

```cpp title="ğŸ”¹ Program wczytujÄ…cy imie"
#include <iostream>
// highlight-next-line
#include <string>

int main()
{
	// highlight-next-line
	std::string name;
	std::cout << "Podaj swoje imie: ";
	std::cin >> name;
	std::cout << "Witaj, " << name << "!\n";
	std::cout << "Twoje imie ma " << name.size() << " znakow.\n";
}
```

## Typ przechowujÄ…cy tekst

W poprzednich lekcjach mÃ³wiliÅ›my o rÃ³Å¼nych typach zmiennych, gÅ‚Ã³wnie tych,
ktÃ³re przechowujÄ… liczby. WspomnieliÅ›my teÅ¼ o typie `char` (od ang.: *character*), ktÃ³ry przechowuje
**pojedynczy znak**.

W programowaniu, na tekst mÃ³wi siÄ™ *Å‚aÅ„cuch znakÃ³w* (ang.: *string*).
W C++ istnieje typ, ktÃ³ry pozwala nam przechowywaÄ‡ takie Å‚aÅ„cuchy i jest to [`std::string`](/docs/std/containers/strings/string).

:::caution Plik nagÅ‚Ã³wkowy
Aby mÃ³c poprawnie korzystaÄ‡ z `std::string` **musimy** dodaÄ‡ do kodu nagÅ‚Ã³wek `string`,
w ten sam sposÃ³b co wczeÅ›niej `iostream`:

```cpp
#include <string>
```
:::

Typu `std::string` uÅ¼ywamy tak jak kaÅ¼dego innego, czyli:

```cpp title="ğŸ”¹ UÅ¼ywanie typu string"
int number;
std::string text;
```

### Inicjalizacja

Przypisanie poczÄ…tkowej wartoÅ›ci wyglÄ…da tak samo jak w przypadku zmiennych o innych typach,
przy czym naleÅ¼y pamiÄ™taÄ‡, Å¼e **tekst podajemy miÄ™dzy cudzysÅ‚owami**, nie pojedynczymi apostrofami:

```cpp
std::string welcome = "Hello, World!";
std::cout << welcome;
```

JeÅ›li nie podamy Å¼adnej wartoÅ›ci, to zmienna bÄ™dzie Å‚aÅ„cuchem o dÅ‚ugoÅ›ci 0, tj. bÄ™dzie pustym tekstem.

## Operacje na napisach

### Interakcja z uÅ¼ytkownikiem

Napisy moÅ¼emy wyÅ›wietlaÄ‡ za pomocÄ… `std::cout` oraz wczytywaÄ‡ za pomocÄ… `std::cin`.

```cpp title="ğŸ”¹ Wczytanie imienia i powitanie"
#include <iostream>
#include <string>

int main()
{
	std::string name;
	std::cout << "Podaj swoje imie: ";
	std::cin >> name;
	std::cout << "Witaj, " << name << "!\n";
}
```

ZauwaÅ¼, Å¼e `std::cin` pobiera tekst do napotkania pierwszego biaÅ‚ego znaku, czyli np. spacji.
Przez to, jeÅ›li podamy swoje imie i nazwisko to do zmiennej `name` trafi jedynie imiÄ™.
Aby pobraÄ‡ caÅ‚Ä… liniÄ™ tekstu piszemy:

```cpp title="ğŸ”¹ Wczytywanie caÅ‚ej linii tekstu"
std::string name;
std::getline(std::cin, name);
```

### ÅÄ…czenie

Aby dopisaÄ‡ na koniec stringa pewien tekst, moÅ¼emy uÅ¼yÄ‡ operatora `+=`:

```cpp
std::string name = "Jan";
name += " Kowalski";

std::cout << name;
```

JeÅ›li trochÄ™ pokombinujemy z kolejnoÅ›ciÄ… operacji, to za pomocÄ… operatora `=` oraz `+` moÅ¼emy
dodaÄ‡ fragment tekstu na poczÄ…tek:

```cpp
std::string name = "Jan";
// highlight-next-line
name = "Kowalski " + name;

std::cout << name;
```

### Sprawdzanie dÅ‚ugoÅ›ci

Aby sprawdziÄ‡ ile znakÃ³w znajduje siÄ™ w Å‚aÅ„cuchu uÅ¼ywamy tzw. *metody* `size`.
O funkcjach i metodach powiemy wiÄ™cej dalej w kursie, na ten moment zapamiÄ™taj, Å¼e
uÅ¼ywa siÄ™ tego w ten sposÃ³b:

```cpp title="ğŸ”¹ Program wczytujÄ…cy imie"
#include <iostream>
// highlight-next-line
#include <string>

int main()
{
	// highlight-next-line
	std::string name;
	std::cout << "Podaj swoje imie: ";
	std::cin >> name;
	std::cout << "Witaj, " << name << "!\n";
	std::cout << "Twoje imie ma " << name.size() << " znakow.\n";
}
```

czyli podajemy zmiennÄ… (`name`), nastÄ™pnie po kropce piszemy `size` i dajemy **puste** nawiasy okrÄ…gÅ‚e:

```cpp title="ğŸ”¹ WywoÅ‚anie metody size"
name.size()
```

Co ciekawe, `std::string` ma rÃ³wnieÅ¼ drugÄ… metodÄ™, o nazwie `length`, ktÃ³ra dziaÅ‚a dokÅ‚adnie w ten sam sposÃ³b:
```cpp title="ğŸ”¹ WywoÅ‚anie metody length"
name.length()
```


### Pobieranie fragmentu

Analogicznie do metody `size` moÅ¼emy pobraÄ‡ fragment napisu za pomocÄ… metody `substr` (od ang.: *substring*):

```cpp title="ğŸ”¹ WywoÅ‚anie metody substr"
std::string name = "Jan Kowalski";
std::cout << name.substr(0, 3);
```

ZauwaÅ¼, Å¼e w nawiasach okrÄ…gÅ‚ych podajemy zakres znakÃ³w, ktÃ³re chcemy uzyskaÄ‡:

```cpp
substr( [pozycja startowa], [iloÅ›Ä‡ znakÃ³w] )
```

czyli w przypadku powyÅ¼ej kopiujemy trzy znaki zaczynajÄ…c od pozycji `0`.

:::caution Indeksowanie
W napisach liczymy znaki od `0`, a nie od `1`. Pierwszy znak znajduje siÄ™ na pozycji `0`.
:::

### Konwersja liczb na tekst

Ze wzglÄ™du na to, w jaki sposÃ³b program przechowuje liczby i tekst, te wartoÅ›ci
nie sÄ… domyÅ›lnie konwertowalne miÄ™dzy sobÄ…. Å»eby to zrozumieÄ‡, musimy potrafiÄ‡ rozrÃ³Å¼niÄ‡
te dwie rzeczy:

```cpp
53
"53"
```

Pierwsza wartoÅ›Ä‡ jest liczbÄ… 53, a druga to napis skÅ‚adajÄ…cy siÄ™ ze znakÃ³w `'5'` oraz `'3'`.
JeÅ›li chcemy przekonwertowaÄ‡ liczbÄ™ `53` na formÄ™ tekstowÄ…, **nie moÅ¼emy** zrobiÄ‡ tego w ten sposÃ³b:

<Tabs>
<TabItem value="bad1" label="âŒ Niepoprawne" default>

```cpp
int number = 53;
std::string numberInStr	= number; // BÅ‚Ä…d
```

</TabItem>
<TabItem value="bad2" label="âŒ Niepoprawne">

```cpp
std::string numberInStr	= 53; // BÅ‚Ä…d
```

</TabItem>
</Tabs>


Zamiast tego musimy uÅ¼yÄ‡ tzw. funkcji `std::to_string` (o funkcjach powiemy dalej w kursie).
Robi siÄ™ to w ten sposÃ³b:

```cpp title="âœ” Konwersja liczby na napis"
int number = 53;
std::string numberInStr	= std::to_string(number);
```

W ten sam sposÃ³b, jeÅ›li mamy wewnÄ…trz Å‚aÅ„cucha znakÃ³w zapisanÄ… liczbÄ™, moÅ¼emy jÄ…
przekonwertowaÄ‡ na inta za pomocÄ… `std::stoi` (od ang.: _**s**tring **to** **i**nt_) oraz
typu `float` za pomocÄ… `std::stof` (od ang.: _**s**tring **to** **f**loat_):

<Tabs>
<TabItem value="stoi" label="ğŸ”µ std::stoi" default>

Konwersja `std::string` na `int`:
```cpp
std::string numberInStr = "53";
int number = std::stoi(numberInStr);
```

</TabItem>
<TabItem value="stof" label="ğŸŸ£ std::stof">

Konwersja `std::string` na `float`:
```cpp
std::string numberInStr = "53.5"; // w tekÅ›cie nie podajemy `f` na koÅ„cu
float number = std::stof(numberInStr);
```

</TabItem>
</Tabs>


## PrzykÅ‚ady

### Podstawowa manipulacja

#### Tworzenie i wyÅ›wietlanie

<Columns spacing={40} columns={['1fr', '1fr']}>
<div>

```cpp title="Tworzenie i wyÅ›wietlanie"
#include <iostream>
#include <string>

int main() {
	std::string myName = "Super Coder";
	std::cout << "My name is " << myName << "!\n";
}
```

</div>

<div>

```plaintext title="Wynik (konsola)"
My name is Super Coder!
```

</div>
</Columns>

#### Dodawanie napisÃ³w

<Columns spacing={40} columns={['1fr', '1fr']}>
<div>

```cpp title="Dodawanie napisÃ³w"
#include <iostream>
#include <string>

int main() {
	std::string myName = "Super";
	std::string mySurname = "Coder";

	// MoÅ¼emy dodawaÄ‡ napisy do siebie:
	std::string myWholeName = myName + " " + mySurname;

	std::cout << "My name is " << myWholeName << "!\n";
}
```

</div>

<div>

```plaintext title="Wynik (konsola)"
My name is Super Coder!
```

</div>
</Columns>

#### Podnapisy

<Columns spacing={40} columns={['1fr', '1fr']}>
<div>

```cpp title="Podnapisy"
#include <iostream>
#include <string>

int main() {
	std::string myWholeName = "Super Coder";

	std::string myName = myWholeName.substr(0, 5);
	// 0 1 2 3 4 5 6 7 8 9 10
	// S u p e r   C o d e r
	// ^^^^^^^^^
	// Zaczynamy od indeksu 0, bierzemy 5 znakÃ³w.

	std::cout << "My name is " << myName << "!\n";
}
```

</div>

<div>

```plaintext title="Wynik (konsola)"
My name is Super!
```

</div>
</Columns>

### Wczytywanie

#### Wczytywanie cin'em

<Columns spacing={40} columns={['1fr', '1fr']}>
<div>

```cpp title="Wczytywanie cin'em"
#include <iostream>
#include <string>

int main() {
	std::string name;
	std::cin >> name;

	std::cout << "Hello " << name << "!\n";
}
```

</div>

<div>

```plaintext title="Wynik (konsola)"
> Super Coder
Hello Super!
```

</div>
</Columns>

:::caution `std::cin` vs `std::getline`
`std::cin` domyÅ›lnie wczytuje tylko i wyÅ‚Ä…cznie do napotkania spacji, z tego powodu jeÅ›li wprowadzimy napis w ktÃ³rym sÄ… spacje, zostanie on uciÄ™ty.
Aby mÃ³c wczytaÄ‡ napis ze spacjami, naleÅ¼y uÅ¼yÄ‡ [`std::getline`](#wczytywanie-getlinem).
:::

#### Wczytywanie getlin'em

<Columns spacing={40} columns={['1fr', '1fr']}>
<div>

```cpp title="Wczytywanie getlin'em"
#include <iostream>
#include <string>

int main() {
	std::string name;
	std::getline(std::cin, name);

	std::cout << "Hello " << name << "!\n";
}
```

</div>

<div>

```plaintext title="Wynik (konsola)"
> Super Coder
Hello Super Coder!
```

</div>
</Columns>

#### Separator w getlinie

W funkcji `std::getline` jako trzeci argument moÅ¼emy podaÄ‡ rÃ³wnieÅ¼ separator, do ktÃ³rego `std::getline` ma czytaÄ‡.
DomyÅ›lnie jest to znak nowej linii, wiÄ™c `std::getline` wczytuje caÅ‚Ä… liniÄ™, jednak moÅ¼emy tam daÄ‡ dowolny znak.

<Columns spacing={40} columns={['1fr', '1fr']}>
<div>

```cpp title="Separator w getlinie"
#include <iostream>
#include <string>

int main() {
	std::string name;
	std::getline(std::cin, name, '?');

	std::cout << "Hello " << name << "!\n";
}
```

</div>

<div>

```plaintext title="Wynik (konsola)"
> Super Co?der
Hello Super Co!
```

</div>
</Columns>


### Konwersje

#### Int i float na string

<Columns spacing={40} columns={['1fr', '1fr']}>
<div>

```cpp title="Int i float na string"
#include <iostream>
#include <string>

int main() {
	int dayOfTheWeek = 3;
	float temperature = 17.4f;

	std::string message = "Mamy dzisiaj " 
		+ std::to_string(dayOfTheWeek) 
		+ ". dzieÅ„ tygodnia, dzisiejsza temperatura to " 
		+ std::to_string(temperature) 
		+ " stopni Celsjusza!";

	std::cout << message << "\n";
}
```

</div>

<div>

```plaintext title="Wynik (konsola)"
Mamy dzisiaj 3. dzieÅ„ tygodnia, dzisiejsza temperatura to 17.000000 stopni Celsjusza!
```

</div>
</Columns>


:::important `17.400000`
RzuciÅ‚o Ci siÄ™ pewnie w oczy, Å¼e nasza zmienna `temperature` o wartoÅ›ci `17.4` jest reprezentowana w napisie jako `17.400000`.
Tak powinno byÄ‡, a sposÃ³b manipulowanie precyzjÄ… liczb zmiennoprzecinkowych omÃ³wimy kiedy indziej.
:::

#### String na int

<Columns spacing={40} columns={['1fr', '1fr']}>
<div>

```cpp title="String na int"
#include <iostream>
#include <string>

int main() {
	std::string cpp20Release = "2020";
	int howMuchPassed = std::stoi(cpp20Release) - 2017;
	std::cout << "Standard C++20 wyszedÅ‚ w roku " << cpp20Release << ", " << howMuchPassed <<" lata po standardzie C++17.\n";
}
```

</div>

<div>

```plaintext title="Wynik (konsola)"
Standard c++20 wyszedÅ‚ w roku 2022, 3 lata po standardzie C++17.
```

</div>
</Columns>

### Szukanie

#### Szukanie napisu

```
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22
N a z y w a m   s i  e     S  u  p  e  r     C  o  d  e  r
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
```
`introduction.find("Super Coder")` znajdzie nam pozycjÄ™ `"Super Coder"`, zwrÃ³ci indeks **12**.
Przekazujemy to do metody `substr` wraz z argumentem `11`, ktÃ³ry oznacza dlugoÅ›Ä‡ napisu.
W naszym przypadku `"Super Coder"` ma 11 liter.

<Columns spacing={40} columns={['1fr', '1fr']}>
<div>

```cpp title="Szukanie napisu"
#include <iostream>
#include <string>

int main() {
	std::string introduction = "Nazywam sie Super Coder";
	std::string name = introduction.substr(introduction.find("Super Coder"), 11);

	std::cout << name << "\n";
}
```

</div>

<div>

```plaintext title="Wynik (konsola)"
Super Coder
```

</div>
</Columns>

#### Dzielenie napisu

Dzielenie napisu (*ang. string splitting*) polega na podzieleniu caÅ‚ego napisu na mniejsze czÄ™Å›ci,
na podstawie separatora (*ang. delimiter/separator*). UÅ¼ywane jest czÄ™sto, np. Å¼eby wydobyÄ‡ nazwÄ™ z adresu email,
wartoÅ›Ä‡ z rekordu `NAZWA=WARTOÅšÄ†`, czy konkretnych elementÃ³w z daty w formacie `YYYY-MM-DD`.

<Columns spacing={40} columns={['1fr', '1fr']}>
<div>

```cpp title="Dzielenie napisu"
#include <iostream>
#include <string>

int main() {
	std::string time = "16:04";
	int position = time.find(':'); // mozemy wyszukiwac pojedyncze znaki lub cale napisy

	int hour = std::stoi(time.substr(0, 2));
	// tutaj wiemy, ze godzina zaczyna sie od indeksu 0 i ma dwa znaki
	int minutes = std::stoi(time.substr(position + 1, 2)); 
	// wykorzystujemy pozycje znalezionego dwukropka i wiedze,
	// ze minuty rowniez sa zapisane na dwoch znakach
	// przeprowadzamy tutaj konwersje na int, poniewaz dokonujemy pozniej operacji matematycznej w cout

	std::cout << "Do godziny " << hour + 1 << " pozostalo "  << 60 - minutes << " minut.\n";
}
```

</div>

<div>

```plaintext title="Wynik (konsola)"
Do godziny 17 pozostalo 56 minut.
```

</div>
</Columns>

:::tip `position + 1`
Przy przypisywaniu wartoÅ›ci do zmiennej `minutes` robimy `std::stoi(time.substr(position + 1, 2))`.
```
0 1 2 3 4 
1 6 : 0 4
	^ ^
```
`position` to `2`, wiÄ™c wywoÅ‚anie `time.substr(position, 2)` zwrÃ³ciÅ‚oby `:0`.
Musimy wiÄ™c tutaj doaÄ‡ `1` do position, Å¼eby poprawnie dostaÄ‡ liczbÄ™ minut.
:::

## Potencjalne bÅ‚Ä™dy

<ImproveSection />