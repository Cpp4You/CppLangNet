---
sidebar_position:	1
sidebar_label:		"1. Pierwszy program"
title:				"Pierwszy program"
description:		"Lekcja: pierwszy program w języku C++"
hide_title:			true
---

import Columns		from '@site-comps/Columns';
import GoogleSlides	from '@site-comps/GoogleSlides';
import Image		from '@site-comps/Image';
import Tooltip		from '@site-comps/Tooltip';
import NotFinished	from '@site/i18n/pl/presets/NotFinished.mdx';

import Tabs			from '@theme/Tabs';
import TabItem		from '@theme/TabItem';

# Pierwszy program

Ta lekcja nauczy Cię jak napisać pierwszy prosty program w języku C++,
który będzie mógł wyświetlać tekst i wykonywać proste obliczenia.

## Kod programu

Poprzednio skończyliśmy na następującym kodzie:

<Columns spacing={40} columns={['7fr', '4fr']}>
<div>

```cpp title="main.cpp"
#include <iostream>

int main()
{
	std::cout << "Witaj, świecie!";
}
```

</div>

<div>

```plaintext title="Wynik (konsola)"
Witaj, świecie!
```

</div>
</Columns>

Wyświetla on tekst podany powyżej w okienku "Wynik".


## Omówienie

### Funkcja główna

Zacznijmy od serca naszej aplikacji, czyli tzw. *funkcji głównej* (ang.: `main`):

```cpp title="Fragment kodu main.cpp"
int main()
{

}
```

Pierwszą lini  rozpoczyna **definicja funkcji**. Składa się ona z typu zwracanego `int`, nazwy `main` oraz jej parametrów wewnątrz `()` (w naszym przypadku żadnych).
O ile większość z tych określeń nie jest teraz ważna, to jedyne na co powinieneś zwrócić uwagę to nazwa `main`. Zawsze będzie ona wyglądać tak,
`int main()`. Twój program musi zawsze zawierać funkcję `main` w tym określonym formacie.

Komputer wykonuje program linijka po linijce.
Gdy uruchamia aplikację, po kolei realizuje instrukcje z **bloku kodu** `main`-a.

**Blok kodu** w C++, to zbiór instrukcji zawartych wewnątrz nawiasów klamrowych:

```cpp
{

}
```

Funkcja główna `main` ma swój blok kodu i wszystko co znajdzie się pomiędzy tymi nawiasami zostanie
wykonane <u>po kolei, od góry do dołu</u>.

:::important
Kod w środku funkcji `main` jest **zawsze pierwszym kodem, który się wykona**.
:::

### Nagłówek `iostream`

Na samym początku, znajduje się linijka:

```cpp
#include <iostream>
```

Pozwoli ona nam dalej korzystać z funkcjonalności **wejścia** (ang.: *input*) i **wyjścia** (ang.: *output*) (stąd `iostream` - od _**i**nput/**o**utput stream_).
W praktyce oznacza to, że będziemy mogli wypisać coś w konsoli oraz pozwolić użytkownikowi wpisać coś do konsoli i to przechwycić.
`iostream` jest **plikiem nagłówkowym** (ang.: *header file*). W przyszłości będziemy korzystać z wielu innych nagłówków.

Instrukcje `#include <naglowek>` prawie zawsze dajemy na samym początku pliku z kodem.
O samym `#include` powiemy sobie w przyszłości więcej.

### Konsola

Konsola lub inaczej "terminal" to najbardziej podstawowe narzędzie pozwalające na komunikację z programem. Pozwala ona stworzyć prosty interfejs,
między programem a jego użytkownikiem. Będziesz mieć okazję zapoznać się z tym narzedziem naprawdę dobrze, ponieważ będziesz używać
go bardzo często w swojej przygodzie z programowaniem.

Poniżej znajdują się przykłady uruchomienia <Tooltip title="Jest to przykładowy kod, który wylicza pole trapezu. Później w kursie poruszymy podobny temat.">tego samego kodu</Tooltip> w kilku różnych środowiskach. Mimo, że nie każdy terminal jest taki sam, to wyglądają one podobnie - wyświetlają tekst z małą ilością lub zupełnym brakiem kolorów.

#### 🖼 Przykłady wyglądu konsol

<Tabs groupId="consoles">
<TabItem value="windows" label="Windows" default>
	<Image center
			maxheight={400}
			alt="Przykładowy wygląd konsoli na Windowsie"
			src="/img/tutorials/course/basic/first-program/example-terminal-windows.png"
		/>
</TabItem>
<TabItem value="linux" label="Linux">
	<Image center
			maxheight={400}
			alt="Przykładowy wygląd konsoli na Linuxie"
			src="/img/tutorials/course/basic/first-program/example-terminal-linux.png"
		/>
</TabItem>
</Tabs>

<!-- FIXME: Record a video of different environments (replit, vscode, VS 2022), like in the english version -->

Wiele edytorów kodu takich jak Visual Studio, VS Code, CLion czy Vim posiadają zintegrowane okno konsoli bezpośrednio w programie.

### Wypisywanie do konsoli

Żeby wyświetlić tekst w konsoli, użyliśmy następującej instrukcji w bloku funkcji `main`:

```cpp
std::cout << "Witaj, świecie!";
```

`cout` służy do wyświetlania tekstu do konsoli.

:::tip Dla ciekawskich 😉
`cout` jest tzw. strumieniem wyjścia znaków (ang.: <i><b>c</b>haracter <b>out</b>put</i>),
jednak na ten moment nie musisz tego pamiętać.
:::

Mogę teraz zduplikować tę linijkę kilka razy:

```cpp
std::cout << "Witaj, świecie!1";
std::cout << "Witaj, świecie!2";
std::cout << "Witaj, świecie!3";
```

aby dostać następujący efekt:

```
Witaj, świecie!1Witaj, świecie!2Witaj, świecie!3
```

:::caution Średnik na końcu instrukcji!
Średnik (`;`) oznacza koniec pojedynczej instrukcji i tym samym oddziela
następujące po sobie instrukcje. Kompilator nie patrzy czy są one napisane w osobnych liniach.
Z tego powodu taki kod:
```cpp
std::cout << "Witaj, świecie!1"; std::cout << "Witaj, świecie!2"; std::cout << "Witaj, świecie!3";
```

jest **akceptowalny**, jednak bardzo nieczytelny. Nie pisz kodu w ten sposób!
:::


Prezentacja działania wyżej stworzonego programu (w wersji angielskiej):

<GoogleSlides
		src="https://docs.google.com/presentation/d/e/2PACX-1vTsdQPMXKN90rcz4i515JK-rpUHjHTc5xIjGVtNJS8XSbloMNObHEBUSszvYi9I7tuKBNIdEKNFh1jk/embed"
		aspectRatio={960 / 500}
		delay={500}
		centered
	/>

Zwróć uwagę, że tekst wypisał się do konsoli bez żadnych odstępów,
w jednej linii i zawinął się, dopiero pod koniec dostępnego miejsca.

Program robi **dokładnie** to, co ma napisane w kodzie - nie więcej, nie mniej.
My "powiedzieliśmy" mu tylko tyle, że ma wyświetlić podane znaki... i on to robi.
Musimy "złamać" linię w odpowiednim miejscu. Sprawi to, że następne
znaki będą wyświetlane od samego początku kolejnego wiersza.
Aby to zrobić należy **wewnątrz tekstu** umieścić **specjalny znak**
nowej linii: `\n`, w ten sposób:

```cpp
std::cout << "Witaj, świecie!\n";
```

:::caution Backslash
Zwróć uwagę, że użyliśmy **backslash**a (`\n`), a nie **forward slash**a (`/n`).
:::

Działanie programu po dodaniu znaków nowej linii:

<GoogleSlides
		src="https://docs.google.com/presentation/d/e/2PACX-1vRtT6R8wewyaM8WZRUP-KIREO_1HEdReq-BhpmUYKsVWRm5VbRRn7jZbhZyMIZMVzarQ1xkGrjS2eoM/embed"
		aspectRatio={960 / 500}
		delay={500}
		centered
	/>

:::important Znak nowej linii
Sekwencja znaków `\n` reprezentuje pojedynczy znak. __W kodzie__ musimy zapisać dwa znaki, ale dla programu jest to pojedynczy znak specjalny.
Dzieje się tak dlatego, że nie możemy po prostu wstawić "entera" bezpospośrednio wewnątrz tekstu w kodzie.
Znaku **backslash** (`\`) używamy, aby zasygnalizować, że znak, który po nim następuje <Tooltip title={<>Nazywa się to <b>escape sequence</b>, więcej o nich później</>}>ma specjalne znaczenie</Tooltip>.
:::

<!-- --------------------------------- Poprzedni tekst, który nie jest używany póki co

mimo, że w kodzie składa się tak naprawdę z dwóch znaków - `\` oraz `n`.
Sekwencja `\n` jest zastępywana specjalnym znakiem nowej linii. Wewnątrz tekstu w kodzie, nie możemy dać entera,
stąd ten zapis. Znak backslash (`\`) informuje, że **następujący** po nim znak, oznacza coś specjalnego
(tzw. *escape sequence*, o tym kiedy indziej).

------------------------------------------------ -->


### Przedrostek przestrzeni nazw

`std::` to przedrostek tzw. **biblioteki standardowej**, z której pochodzi `cout`.

Początkujący zazwyczaj nie przepadają za ciągłym powtarzaniem go. Można go pominąć, jeśli użyjemy
wcześniej odpowiedniej linijki kodu:

```cpp
#include <iostream>
int main()
{
	// highlight-next-line
	using std::cout;
	cout << "Witaj, świecie!";
}
```

Od miejsca wprowadzenia `using std::cout;` do końca bloku kodu można pominąć `std::` przy używaniu
`cout`.

:::caution using namespace std
W wielu innych kursach i źródłach można spotkać się z polecaniem korzystania z `using namespace std;`
**na samej górze** pliku z kodem. O ile jest to legalne w C++, to doświadczeni programiści
zdecydowanie **odradzają tej praktyki**. Więcej o tym powiemy w dalszej części kursu.

Na ten moment preferuj styl pokazany wyżej.
:::

## Wykonywanie obliczeń

Programowanie służy do automatyzacji pewnych czynności. Na przykład, możemy zlecić komputerowi
wykonanie obliczenia matematycznego za nas.

Użyj następującego kodu:

<Columns spacing={40} columns={['7fr', '5fr']}>
<div>

```cpp title="main.cpp"
#include <iostream>
int main()
{
	std::cout << "120 * 120 + 540";
}
```

</div>
<div>

```plaintext title="Wynik (konsola)"
120 * 120 + 540
```

</div>
</Columns>

Zwróć uwagę na wynik powyższego programu.

:::caution Uwaga
Wszystko zawarte w cudzysłowie jest traktowane jako tekst, a nie instrukcje.
:::

Dlatego właśnie zamiast wyświetlić wynik obliczenia, dostaliśmy to co wpisaliśmy do cudzysłowu.

Żeby oznajmić, że chcemy wykonać pewne obliczenie musimy usunąć cudzysłów:

<Columns spacing={40} columns={['7fr', '5fr']}>
<div>

```cpp title="main.cpp"
#include <iostream>
int main()
{
	std::cout << 120 * 120 + 540;
}
```

</div>
<div>

```plaintext title="Wynik (konsola)"
14940
```

</div>
</Columns>

Po uruchomieniu programu dostaniemy prawidłowy wynik obliczenia znajdującego się w kodzie.

:::important Operatory matematyczne
- `+` dodaje do siebie dwie liczby
- `-` odejmuje od siebie dwie liczby
- `*` mnoży przez siebie dwie liczby
- `/` dzieli przez siebie dwie liczby
- `()` kontroluje kolejność wykonywania działań

W wykonywaniu działań obowiązuje kolejność znana nam z matematyki:

1. Najpierw to co w nawiasach okrągłych
2. Następnie mnożenie i dzielenie, w kolejności od lewej do prawej
3. Później dodawanie i odejmowanie, w kolejności od lewej do prawej
:::

## Podsumowanie

Poznałeś strukturę kodu pierwszego programu.

:::tip
Żeby przejść do ćwiczeń odwiedź [tę stronę](exercises).
:::

Na koniec warto zwrócić uwagę co może spowodować **błąd kompilacji**,
lub czego nie powinniśmy robić, żeby kod był zgodny z dobrymi praktykami.

### Pomijanie `std::`

:::tip Dobra praktyka
Najlepiej nie pomijaj przedrostka `std::`.
:::

Jeśli przedrostek `std::` sprawia Ci problem, to rozważ
użycie go, tak jak w przykładzie, lokalnie, **zawsze wewnątrz funkcji**:

```cpp title="🔹 Dopuszczalne użycie"
#include <iostream>
int main()
{
	// highlight-next-line
	using namespace std;
	cout << "Witaj, świecie!";
}
```

Kładę na to nacisk, ponieważ jest możliwe umieszczenie

```cpp
using namespace std;
```

również przed całą funkcją `main`, jednak **nie rób tego**, nawet jeśli cały internet mówi, że tak jest ok.
To podejście może prowadzić do dziwnych błędów wynikających z konfliktu nazw (ang. ambiguity).
Zawartość biblioteki standardowej jest ogromna. `std` posiada wewnątrz bardzo wiele nazw.

#### Porównanie `using`

- **`using namespace std`** sprawia, że wszelkie nazwy, które wcześniej wymagały dodania przedrostka `std::` teraz będą dostępne
bez tego wymogu, a wśrod nich są takie nazwy jak np. `left`
- **`using std::cout`** pozwala nam pomijać przedrostek `std::` tylko przed `cout`. Możemy w ten sposób umiescić kilka potrzebnych rzeczy,
np.: `using std::cout, std::cin, std::string;`

Podsumowując: preferuj używanie `using std::cout` zamiast `using namespace std`.

### Brak średników `;`

Początkujący często zapominają o średnikach (`;`) na końcach
instrukcji. Prześledź dokładnie przykłady kodu, podawane
w tej lekcji zwracając uwagę, gdzie powinny one się znaleźć.

#### 🔴 Treść błędu

<Tabs groupId="compiler">
<TabItem value="gcc" label="GCC" default>

```plaintext
error: expected `;` before (...)
```

#### 🖼 Ilustracja błędu:

<Image center
		alt="Ilustracja błędu - brak średnika"
		src="/img/tutorials/course/basic/first-program/error-no-semicolon-pl.png"
	/>

</TabItem>
<TabItem value="msvc" label="MSVC">

```plaintext
error C2143: syntax error: missing ';' before 'std::cout'
```

#### 🖼 Ilustracja błędu:

<Image center
		alt="Ilustracja błędu - missing semicolon"
		src="/img/tutorials/course/basic/first-program/error-no-semicolon-en-msvc.png"
	/>

</TabItem>
</Tabs>

:::info Niedokładna treść błędów
Kompilatory próbując wykryć gdzie brakuje średnika często muszą zgadywać. Z tego powodu, jeśli jesteś pewny,
że w podanej przez kompilator linii nie brakuje średnika, sprawdź również kilka linijek, które otaczają tą podaną.

Dodatkowo, brakujące średniki mogą powodować inne niezwiązane błędy niżej w Twoim kodzie.
Zazwyczaj najbardziej pomocna jest treść pierwszego błędu wystosowanego przez kompilator.
:::

### Niezakończony tekst

Tekst pomiędzy znakami `"` `"` i należy pamiętać o tym, żeby na końcu
tekstu faktycznie ten cudzysłów się znalazł.

#### 🔴 Treść błędu

<Tabs groupId="compiler">
<TabItem value="gcc" label="GCC" default>

```plaintext
error: missing terminating " character
```

#### 🖼 Ilustracja błędu

<Image center
		alt="Ilustracja błędu - missing quote"
		src="/img/tutorials/course/basic/first-program/error-no-terminating-quote-en.png"
	/>

</TabItem>
<TabItem value="msvc" label="MSVC">

```plaintext
error C2001: newline in constant
error C2143: syntax error: missing ';' before '}'
```

#### 🖼 Ilustracja błędu:

<Image center
		alt="Ilustracja błędu - missing quote"
		src="/img/tutorials/course/basic/first-program/error-no-terminating-quote-en-msvc.png"
	/>

</TabItem>
</Tabs>

### Wyświetlanie znaku `"`

Może Cię kusić, aby umieścić cudzysłów wewnątrz komunikatu, gdy wypisujesz go na konsolę.
Pamiętaj jednak, że C++ traktuje wszystko, co znajduje się wewnątrz `"..."`, jako tekst.

Z tego powodu, jeśli napiszesz:
```cpp
"Cześć! Nazywam się "Diego", witaj w kolonii!"
```

C++ zinterpretuje to jako
```cpp
"TEKST" KOD C++ "TEKST"
```

Możesz temu zapobiec dodając backslash (`\`) przed cudzysłowem, by użyć tzw. *escape-sequence*.

```cpp
"Cześć! Nazywam się \"Diego\", witaj w kolonii!"
```

#### 🔴 Treść błędu

<Tabs groupId="compiler">
<TabItem value="gcc" label="GCC" default>

```plaintext
error: unable to find string literal operator ‘operator""Diego’ with ‘const char [20]’, ‘long unsigned int’ arguments
```

#### 🖼 Ilustracja błędu:

TODO

</TabItem>
<TabItem value="msvc" label="MSVC">

```plaintext
error C3688: invalid literal suffix 'Diego'; literal operator or literal operator template 'operator ""Diego' not found
error C2143: syntax error: missing ';' before 'string'
```

#### 🖼 Ilustracja błędu:

<Image center
		alt="Ilustracja błędu - nieprawidłowy cudzysłów"
		src="/img/tutorials/course/basic/first-program/error-unescaped-quote-en-msvc.png"
	/>

</TabItem>
</Tabs>

:::info Niepomocne błędy
Powyższe komunikaty o błędach nie są zbyt pomocne! Realną wskazówką powinien być fakt, że program traktuje to, co ma być tekstem, jako kod
(widać to w edytorze kodu).
:::
