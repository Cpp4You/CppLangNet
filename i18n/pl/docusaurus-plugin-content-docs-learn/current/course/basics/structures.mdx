---
sidebar_position:	8
sidebar_label:		"8. Struktury"
title:				Struktury
description:		"Lekcja: struktury w jzyku C++"
tags:				[struktura, obiekt, klasa, programowanie-obiektowe, oop]
hide_title:			true
---

<!-- Components -->
import CustomCodeBlock	from "@site-comps/CustomCodeBlock";

<!-- Presets -->
import NotFinished		from '@site/i18n/pl/presets/NotFinished.mdx';
import ImproveSection	from '@site/i18n/pl/presets/ImproveSection.mdx';

<NotFinished/>

# Struktury

W tej lekcji nauczysz si tworzenia typ贸w danych, zo偶onych z wielu mniejszych
element贸w, czyli tego co w C++ nazywamy strukturami.

## Motywacja

Jeli np. tworzc gr , chcemy zawrze w swoim programie przeciwnik贸w,
zwykle bdziemy musieli o ka偶dym z nich zapisac kilka informacji.

Zastan贸w si: jakie dane o wrogach w grze mog si przyda?
Mo偶e to by np.:

- nazwa 
- 偶ycie 
- sia 

itd...

Korzystajc z dotychczas nabytej wiedzy, gdybymy chcieli napisa program,
kt贸ry przechowuje te informacje, moglibymy zrobi to np. tak:

```cpp
#include <string>

int main() {
	std::string	enemyName = "Goblin";
	float		enemyHealth = 50;
	float		enemyStrength = 12;
	// ...
}
```

Gdy bdziemy chcieli mie w grze wicej przeciwnik贸w, napotkamy na pewnien problem,
a waciwie uniedogodnienie:

Jeli skorzystamy w tym celu z wielu tablic:

```cpp
std::vector< std::string >	enemyNames;
std::vector< float >		enemyHealth;
std::vector< float >		enemyStrength;
```

to ka偶dy przeciwnik bdzie opisany pod jednakowym indeksem w tych tablicach:

- `enemyNames[ index ]` opisuje nazw
- `enemyHealth[ index ]` opisuje punkty 偶ycia
- `enemyStrength[ index ]` opisuje punkty siy


:::important Uwaga
Ten spos贸b wi偶e si z "rozrzuceniem" informacji o pojedynczym
przeciwniku, po wielu tablicach.
:::

Dodanie pojedynczego wroga do zbioru, w takim programie wygldaoby tak:

```cpp
enemyNames.push_back("Goblin");
enemyHealth.push_back(70);
enemyStrength.push_back(25);
```

Im wicej r贸偶nych informacji chcemy o przeciwnikach przechowa, tym bdzie to
bardziej uci偶liwe. Na szczcie tutaj z pomoc przychodz nam
**struktury**.

## Tworzenie struktury

Przypomnijmy sobie, jakie dane potrzebujemy przechowa:

- nazwa 
- 偶ycie 
- sia 

Zaraz utworzymy struktur, dziki kt贸rej, bdziemy mogli utworzy **obiekt**,
kt贸ry zawiera w sobie te wszystkie 3 rzeczy.

```cpp
#include <string>

struct Enemy
{
	std::string	name;
	float		health;
	float		strength;
};

int main()
{
	// Na razie pusto
}
```

Powy偶szy kod wprowadza now **struktur** - `Enemy`.

:::important Zapamitaj
**Struktura** to opis, wzorzec, receptura na to, jak utworzy **obiekt** (w tym wypadku wroga).
:::

呕eby utworzy struktur, piszemy po sowie kluczowym `struct` jej nazw, nastpnie
midzy nawiasami klamrowymi `{` `}` umieszczamy jej *zawarto*.

Zawartoci mog by np. zmienne skadowe.

:::danger rednik!
Zwr贸 uwag, na **obowizkowy** rednik po nawiasie klamrowym, zamykajcym definicj
struktury:
```cpp
struct Enemy
{
	std::string	name;
	float		health;
	float		strength;
	// highlight-next-line
};
```
:::

## Obiekty

Popatrz jak stworzy obiekt, kt贸ry korzysta ze wzoru `Enemy`:

```cpp
int main()
{
	Enemy boss;
}
```

W ten spos贸b, zawarlimy te wszystkie 3 pola (`name`, `health` i `strength`)
wewntrz jednej zmiennej `boss`.

:::note Nazewnictwo
Od teraz bdziemy m贸wili, 偶e `boss` jest **obiektem** typu **`Enemy`**.
To oznacza, 偶e zosta stworzony wedug wzoru `Enemy`.
:::

### Dostp do p贸l

Tak jak wy偶ej wspomniaem, `boss` zawiera w sobie 3 rzeczy (pola) tj. skada si z trzech zmiennych.
呕eby dosta si do konkretnej skadowej tego obiektu, musimy u偶y nastpujcego zapisu:

```cpp title=" Ustaw nazw bossa na 'Ogr'"
boss.name = "Ogr";
```

U偶ywamy kropki `.`, do odniesienia si do pola obiektu. W ten sam spos贸b,
mo偶emy np. *zmodyfikowa si wroga*:

```cpp title=" Modyfikowanie p贸l obiektu"
boss.strength	= 50; // Ustawiam si na 50

// Boss wcza tryb "furia" - sia zwikszona
// 呕ycie zmniejszone o poow
boss.strength	+= 25;
boss.health		*= 0.5f;
```

... lub wywietli informacje o nim:

```cpp title=" Korzystanie z p贸l obiektu"
#include <iostream>
#include <string>

struct Enemy
{
	std::string	name;
	float		health;
	float		strength;
};

int main()
{
	// Tworz obiekt bossa
	Enemy boss;
	// Przypisuj temu obiektowi konkretne wartoci
	boss.name		= "Ogr";
	boss.health		= 250;
	boss.strength	= 50;

	std::cout	<< boss.name		<< " posiada "
				<< hero.health		<< " hp i "
				<< hero.strength	<< " siy."
				<< std::endl;
}
```

### Przekazywanie do funkcji

Nic nie stoi na przeszkodzie, 偶eby stworzy funkcj,
kt贸ra przyjmuje obiekt pewnej struktury jako parametr.
Dobrym przykadem bedzie wanie wywietlanie informacji o wrogu:

```cpp title=" Funkcja wywietlajca informacje o przeciwniku"
void printEnemyInfo(Enemy enemy)
{
	std::cout	<< enemy.name		<< " posiada "
				<< enemy.health		<< " hp i "
				<< enemy.strength	<< " siy."
				<< std::endl;
}
```

:::danger Kolejno
`printEnemyInfo` wymaga istnienia typu `Enemy` **przed** zdefiniowaniem
samej funkcji. Oznacza to, 偶e musimy umieci funkcj **pod**
utworzeniem struktury (zobacz przykad ni偶ej).
Wicej o tym ni偶ej w sekcji [Deklarowanie naprz贸d](#Deklarowanie-naprz贸d)
:::


Korzystajc w powy偶szych informacji, utworzymy sobie "gr",
kt贸ra bdzie posiadaa dw贸ch przeciwnik贸w:

- zwyky przeciwnik :  
**Goblin wojownik**, `60` 偶ycia, `14` siy

- boss :  
**Ogr**, `250` 偶ycia, `50` siy


<CustomCodeBlock lineNumbers withTitle maxLines={25}>

```cpp title=" Fragment gry z Ogrem i Goblinem"
#include <iostream>
#include <string>

/// Utworzenie struktury
struct Enemy
{
	std::string	name;
	float		health;
	float		strength;
};

/// Funkcja wywietlajca informacje o przeciwniku
void printEnemyInfo(Enemy enemy)
{
	std::cout	<< enemy.name		<< " posiada "
				<< enemy.health		<< " hp i "
				<< enemy.strength	<< " siy."
				<< std::endl;
}

/// Funkcja g贸wna programu
int main()
{
	// Tworz obiekt goblina i bossa
	Enemy boss;
	Enemy goblin;

	// Ustawiam goblinowi odpowiednie wartoci
	goblin.name		= "Goblin wojownik";
	goblin.health	= 60;
	goblin.strength	= 14;

	// Ustawiam bossowi odpowiednie wartoci
	boss.name		= "Ogr";
	boss.health		= 250;
	boss.strength	= 50;

	// Wywietlam informacje o ka偶dym z nich:
	printEnemyInfo(goblin);
	printEnemyInfo(boss);
}
```

</CustomCodeBlock>

### Domylne wartoci p贸l

<ImproveSection />

## Potencjalne bdy

<ImproveSection />