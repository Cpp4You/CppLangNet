---
title:                  C++ named requirements:SequenceContainer 
tags:                   [named_req,SequenceContainer]
hide_title:             true
---

import SymbolTable, { Symbol }	                        from "@site-comps/SymbolTable";
import {Since, Deprecated, Until, Version, Removed}     from "@site-comps/Versions";
import Columns                                          from "@site-comps/Columns"

# <small>C++ named requirements:</small> *SequenceContainer*
A ***SequenceContainer*** is a [*Container*](/docs/named_req/Container) that stores objects of the same type in a linear arrangement.

### Requirements
The type **X** satisfies *SequenceContainer* if
* The type **X** satisfies [*Container*](/docs/named_req/Container), and

Given 
* `T`, the element type of X
* `A`, the allocator type of X: `X::allocator_type` if it exists, otherwise [`std::allocator`](/docs/std/memory/allocator)&lt;T&gt;
* `a`, an rvalue expression of type X
* `p`, a valid const iterator into `a`
* `q`, a valid dereferenceable const iterator into `a`
* `q1` and `q2`, two const iterators into a such that `[q1, q2)` is a valid range
* `i` and `j`, [*LegacyInputIterators*](/docs/named_req/LegacyInputIterators) such that `[i, j)` is a valid range and that the iterators refer 
to elements implicitly convertible to value_type
* `il`, an object of type <code><a href="/docs/std/utility/initializer_list">std::initializer_list</a>&lt;value_type&gt;</code>
* `n`, a value of type `X::size_type`
* `t`, an lvalue or const rvalue of type `X::value_type`
* `rv`, a non-const rvalue of type `X::value_type`
* `Args`, a template parameter pack
* `args`, a function parameter pack with the pattern `Arg&&`

The following expressions must be valid and have their specified effects for all sequence containers except [std::array](/docs/std/containers/arrays/array):

| **Expression**              | **Return type** | **Effects**                                                                                            | **Precondition**                                                                                                                                                                                                                                                                                                                                                                             | **Postcondition**                                                                                                                                                                 |
|:---------------------------:|:---------------:|:-------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `X(n, t)` <br/> `X a(n, t)` |                 | Constructs the sequence container holding `n` copies of `t`                                            | **T** is [*CopyInsertable*](/docs/named_req/CopyInsertable) into **X**                                                                                                                                                                                                                                                                                                                       | <code><a href="/docs/std/iterator/distance">std::distance</a>(begin(), end())<br/>&nbsp;&nbsp;&nbsp;&nbsp;== n</code>                                                             |
| `X(i, j)` <br/> `X a(i, j)` |                 | Constructs the sequence container equal, element-wise, to the range `[i, j)`                           | **T** is [*EmplaceConstructible*](/docs/named_req/EmplaceConstructible) from `i` into **X** (only for [std::vector](/docs/std/containers/arrays/vector)) If the iterators are not [*LegacyForwardIterator*](/docs/named_req/LegacyForwardIterator)s, **T** must be [*CopyInsertable*](/docs/named_req/CopyInsertable)                                                                        | <code><a href="/docs/std/iterator/distance">std::distance</a>(begin(), end())<br/>&nbsp;&nbsp;&nbsp;&nbsp;== <a href="/docs/std/iterator/distance">std::distance</a>(i, j)</code> |
| `X(il)`                     |                 | `X(il.begin(), il.end())`                                                                              |                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                   |
| `a = il`                    | X&              | Assigns the range represented by `il` into `a`[[1]](#notes)                                            | **T** is [*CopyInsertable*](/docs/named_req/CopyInsertable) and [*CopyAssignable*](/docs/named_req/CopyAssignable)                                                                                                                                                                                                                                                                           | Existing elements of `a` are destroyed or assigned to                                                                                                                             |
| `a.emplace(p, args)`        | iterator        | Insert an object of type `T`, constructed with `std::forward<Args>(args)` before `p`                   | **T** is [*EmplaceConstructible*](/docs/named_req/EmplaceConstructible) <br/>(for [std::vector](/docs/std/containers/arrays/vector) and [std::deque](/docs/containers/queues/deque)) **T** is [*MoveAssignable*](/docs/named_req/MoveAssignable) and [*MoveInsertable*](/docs/named_req/MoveInsertable)                                                                                      | Returned iterator points at the element constructed from `args` into `a`                                                                                                          |
| `a.insert(p, t)`            | iterator        | Inserts a copy of `t` before `p`                                                                       | **T** is [*CopyInsertable*](/docs/named_req/CopyInsertable) <br/>(for [std::vector](/docs/std/containers/arrays/vector) and [std::deque](/docs/containers/queues/deque)) **T** is [*CopyAssignable*](/docs/named_req/CopyAssignable) or [*MoveAssignable*](/docs/named_req/MoveAssignable)                                                                                                   | Returned iterator points at the copy of `t` inserted into `a`                                                                                                                     |
| `a.insert(p, rv)`           | iterator        | Inserts a copy of `rv` before `p`, possibly using move semantics                                       | **T** is [*MoveInsertable*](/docs/named_req/MoveInsertable)<br/> (for [std::vector](/docs/std/containers/arrays/vector) and [std::deque](/docs/containers/queues/deque)) **T** is [*MoveAssignable*](/docs/named_req/MoveAssignable)                                                                                                                                                         | Returned iterator points at the copy of `rv` inserted into `a`                                                                                                                    |
| `a.insert(p, n, t)`         | iterator        | Inserts `n` copies of `t` before `p`                                                                   | **T** is [*CopyInsertable*](/docs/named_req/CopyInsertable) and [*CopyAssignable*](/docs/named_req/CopyAssignable)                                                                                                                                                                                                                                                                           | Returned iterator points at the copy of the first element inserted into `a` or is `p` for `n == 0`                                                                                |
| `a.insert(p, i, j)`         | iterator        | Inserts copies of elements in `[i, j)` before `p`                                                      | **T** is [*EmplaceConstructible*](/docs/named_req/EmplaceConstructible) and `i` and `j` are not in `a`<br/> (only for [std::vector](/docs/std/containers/arrays/vector)) If the iterators are not [*LegacyForwardIterator*](/docs/named_req/LegacyForwardIterator)s, **T** must be [*MoveInsertable*](/docs/named_req/MoveInsertable) and [*MoveAssignable*](/docs/named_req/MoveAssignable) | Each iterator in `[i, j)` is dereferenced once. Returned iterator points at the copy of the first element inserted into `a` or is `p` for `i == j`                                |
| `a.insert(p, il)`           | iterator        | <code>a.insert(p,<br/>&nbsp;&nbsp;&nbsp;&nbsp;il.begin(),<br/>&nbsp;&nbsp;&nbsp;&nbsp;il.end())</code> |                                                                                                                                                                                                                                                                                                                                                                                              | Returned iterator points at the copy of the first element inserted into `a` or is `p` if `il` is empty.                                                                           |
| `a.erase(q)`                | iterator        | Erases the element pointed to by `q`                                                                   | ([std::deque](/docs/containers/queues/deque), [std::vector](/docs/std/containers/arrays/vector))<br/> **T** is [*MoveAssignable*](/docs/named_req/MoveAssignable)                                                                                                                                                                                                                            | Returned iterator points at the element that was immediately following `q` prior to erasure, or `a.end()` if no such element exists.                                              |
| `a.erase(q1, q2)`           | iterator        | Erases elements in `[q1, q2)`                                                                          | ([std::deque](/docs/containers/queues/deque), [std::vector](/docs/std/containers/arrays/vector))<br/> **T** is [*MoveAssignable*](/docs/named_req/MoveAssignable)                                                                                                                                                                                                                            | Returned iterator points at the element that was pointed by `q2` prior to any erasure, or `a.end()` if no such element exists.                                                    |
| `a.clear()`                 | void            | Destroys all elements in `a`                                                                           |                                                                                                                                                                                                                                                                                                                                                                                              | All references, pointers, and iterators are invalidated, including the end iterator. `a.empty() == true`.                                                                         |
| `a.assign(i, j)`            | void            | Replaces elements in `a` with a copy of `[i, j)`                                                       | **T** is [*EmplaceConstructible*](/docs/named_req/EmplaceConstructible) and `i`, `j` not in `a` <br/>([std::vector](/docs/std/containers/arrays/vector)) If not [*LegacyForwardIterator*](/docs/named_req/LegacyForwardIterator). **T** is [*MoveInsertable*](/docs/named_req/MoveInsertable)                                                                                                | Each iterator in `[i, j)` is dereferenced once                                                                                                                                    |
| `a.assign(il)`              | void            | <code>a.assign(il.begin(),<br/>&nbsp;&nbsp;&nbsp;&nbsp;il.end())</code>                                |                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                   |
| `a.assign(n, t)`            | void            | Replaces elements in `a` with `n` copies of `t`                                                        | **T** is [*CopyInsertable*](/docs/named_req/CopyInsertable) and [*CopyAssignable*](/docs/named_req/CopyAssignable)                                                                                                                                                                                                                                                                           |                                                                                                                                                                                   |

#### Notes
1 [std::array](/docs/std/containers/arrays/array) supports assignment from a braced-init-list, but not from an [std::initializer_list](/docs/std/utility/initializer_list)

### Optional operations
The following expressions must be valid and have their specified effects for the sequence containers named, all operations take amortized constant time:

| **Expression**          | **Return type**                               | **Effects**                                                                                               | **Preconditions**                                                                                                                                  | **Containers**                                                                                                                                                                                                                                                                            |
|:-----------------------:|:---------------------------------------------:|:----------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------:|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
| `a.front()`             | reference <br/> const_reference for const `a` | Equivalent to `*a.begin()`                                                                                |                                                                                                                                                    | (all)                                                                                                                                                                                                                                                                                     |
| `a.back()`              | reference <br/> const_reference for const `a` | Equivalent to <br/><code>&#123;<br/> auto tmp = a.end(); <br/>--tmp; <br/>return \*tmp;<br/>&#125;</code> |                                                                                                                                                    | [std::basic_string](/docs/std/containers/strings/string) <br/> [std::array](/docs/std/containers/arrays/array)              <br/> [std::deque](/docs/containers/queues/deque)  <br/> [std::list](/docs/std/containers/lists/list) <br/> [std::vector](/docs/std/containers/arrays/vector) |
| `a.emplace_front(args)` | void                                          | Prepends a **T** constructed with `std::forward<Args>(args)...`                                           | **T** is [*EmplaceConstructible*](/docs/named_req/EmplaceConstructible) into **X** from args                                                       | [std::deque](/docs/containers/queues/deque)              <br/> [std::forward_list](/docs/std/containers/lists/forward_list) <br/> [std::list](/docs/std/containers/lists/list)                                                                                                            |
| `a.emplace_back(args)`  | void                                          | Appends a **T** constructed with `std::forward<Args>(args)...`                                            | **T** is [*EmplaceConstructible*](/docs/named_req/EmplaceConstructible) into **X** from args (std::vector only) **T** is MoveInsertable into **X** | [std::deque](/docs/containers/queues/deque)              <br/> [std::list](/docs/std/containers/lists/list)                 <br/> [std::vector](/docs/std/containers/arrays/vector)                                                                                                       |
| `a.push_front(t)`       | void                                          | Prepends a copy of `t`                                                                                    | **T** is [*CopyInsertable*](/docs/named_req/CopyInsertable) into **X**                                                                             | [std::deque](/docs/containers/queues/deque)              <br/> [std::forward_list](/docs/std/containers/lists/forward_list) <br/> [std::list](/docs/std/containers/lists/list)                                                                                                            |
| `a.push_front(rv)`      | void                                          | Prepends a copy of `rv`, possibly using move semantics                                                    | **T** is [*MoveInsertable*](/docs/named_req/MoveInsertable) into **X**                                                                             | [std::deque](/docs/containers/queues/deque)              <br/> [std::forward_list](/docs/std/containers/lists/forward_list) <br/> [std::list](/docs/std/containers/lists/list)                                                                                                            |
| `a.push_back(t)`        | void                                          | Appends a copy of `t`                                                                                     | **T** is [*CopyInsertable*](/docs/named_req/CopyInsertable) into **X**                                                                             | [std::basic_string](/docs/std/containers/strings/string) <br/> [std::deque](/docs/containers/queues/deque)                  <br/> [std::list](/docs/std/containers/lists/list) <br/>[std::vector](/docs/std/containers/arrays/vector)                                                     |
| `a.push_back(rv)`       | void                                          | Appends a copy of `rv`, possibly using move semantics                                                     | **T** is [*MoveInsertable*](/docs/named_req/MoveInsertable) into **X**                                                                             | [std::basic_string](/docs/std/containers/strings/string) <br/> [std::deque](/docs/containers/queues/deque)                  <br/> [std::list](/docs/std/containers/lists/list) <br/> [std::vector](/docs/std/containers/arrays/vector)                                                    |
| `a.pop_front()`         | void                                          | Destroys the first element.                                                                               | `a.empty() == false`                                                                                                                               | [std::deque](/docs/containers/queues/deque)              <br/> [std::forward_list](/docs/std/containers/lists/forward_list) <br/> [std::list](/docs/std/containers/lists/list)                                                                                                            |
| `a.pop_back()`          | void                                          | Destroys the last element                                                                                 | `a.empty() == false`                                                                                                                               | [std::basic_string](/docs/std/containers/strings/string) <br/> [std::deque](/docs/containers/queues/deque)                  <br/> [std::list](/docs/std/containers/lists/list) <br/> [std::vector](/docs/std/containers/arrays/vector)                                                    |
| `a[n]`                  | reference <br/> const_reference for const `a` | Equivalent to `*(n + a.begin())`                                                                          |                                                                                                                                                    | [std::basic_string](/docs/std/containers/strings/string) <br/> [std::array](/docs/std/containers/arrays/array)              <br/> [std::deque](/docs/containers/queues/deque)  <br/> [std::vector](/docs/std/containers/arrays/vector)                                                    |
| `a.at(n)`               | reference <br/> const_reference for const `a` | Equivalent to `*(n + a.begin())`, except that std::out_of_range is thrown if n &gt;= size()               |                                                                                                                                                    | [std::basic_string](/docs/std/containers/strings/string) <br/> [std::array](/docs/std/containers/arrays/array)              <br/> [std::deque](/docs/containers/queues/deque)  <br/> [std::vector](/docs/std/containers/arrays/vector)                                                    |

Additionally, for every sequence container, the constructor template that takes two input iterators and the member function template overloads of 
`insert()`, `append()`, `assign()`, `replace()` that take two input iterators do not participate in overload resolution if the corresponding template argument does 
not satisfy [*LegacyInputIterator*](/docs/named_req/LegacyInputIterator).

### Sequence containers in the standard library

<SymbolTable noTraits>
    <Symbol autoLink linkName="/docs/std/containers/strings/string"     name="basic_string"                                    desc="stores and manipulates sequences of characters"/>
    <Symbol autoLink linkName="/docs/std/containers/arrays/array"       name={<>array<Version v='cpp11'></Version></>}         desc="static contiguous array"/>
    <Symbol autoLink linkName="/docs/std/containers/arrays/vector"      name="vector"                                          desc="dynamic contiguous array"/>
    <Symbol autoLink linkName="/docs/std/containers/queues/deque"       name="deque"                                           desc="double-ended queue"/>
    <Symbol autoLink linkName="/docs/std/containers/lists/forward_list" name={<>forward_list<Version v='cpp11'></Version></>}  desc="singly-linked list"/>
    <Symbol autoLink linkName="/docs/std/containers/lists/list"         name="list"                                            desc="doubly-linked list"/>
</SymbolTable>

### Trade-offs / usage notes

<SymbolTable noTraits>
    <Symbol name="std::vector"                          desc="Fast access but mostly inefficient insertions/deletions"/>
    <Symbol name="std::array"                           desc="Fast access but fixed number of elements"/>
    <Symbol name={<>std::list<br/>std::forward_list</>} desc="Efficient insertion/deletion in the middle of the sequence"/>
    <Symbol name="std::deque"                           desc="Efficient insertion/deletion at the beginning and at the end of the sequence"/>
</SymbolTable>

### Defect reports
The following behavior-changing defect reports were applied retroactively to previously published C++ standards.

|    DR   | Applied to |                                     Behavior as published                                    |                Correct behavior               |
|:-------:|:----------:|:--------------------------------------------------------------------------------------------:|:---------------------------------------------:|
| LWG 139 | C++98      | the optional operations were not required to be implemented for the designated containers    | required with amortized time                  |
| LWG 149 | C++98      | `a.insert(p, t)` returned iterator while `a.insert(p, n, t)` and `a.insert(p, n, t)` returned void | they all return iterator                      |
| LWG 151 | C++98      | `q1` was dereferenceable[1]                                                                    | it can be non-dereferenceable                 |
| LWG 355 | C++98      | calling `a.back()` or `a.pop_back()` would execute `--a.end()`, which is dangerous[2]              | decrements a copy of `a.end()` instead          |
| LWG 589 | C++98      | the elements that `i` and `j` refer to might not be convertible to value_type                    | they are implicitly convertible to value_type |

1 It is a defect because it makes the behavior of `a.erase(a.begin(), a.end())` undefined is `a` is an empty container. <br/>
2 If the type of `a.end()` is a fundamental type, `--a.end()` is ill-formed. It is dangerous when the type of `a` is templated, in this case this bug can be difficult to be found.